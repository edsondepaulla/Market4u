<div id="boxCompras" ng-if="$root.TIPO_PG == 'COMPRAR' && $root.usuario.COMPRAR">
    <i ng-if="$root.usuario.AUTOATENDIMENTO" ng-click="$root.TIPO_PG='PAGAMENTO'" class="mdi mdi-editor-attach-money"></i>

    <ul id="boxCategorias">
        <li class="{{CAT.ACTIVE?'active':''}}" ng-repeat="CAT in $root.PRODUTOS_COMPRAS.CATEGORIAS">
            <a ng-click="getCategoria(CAT)">{{CAT.DESCRICAO}}</a>
        </li>
        <div class="clearBoth"></div>
    </ul>

    <md-content id="boxProdutos" class="scrollable-content flex" scroll flex md-scroll-y>
        <ul>
            <li ng-repeat="PROD in $root.PRODUTOS_COMPRAS.PRODUTOS">
                <div class="t">
                    <span>{{PROD.DESCRICAO}}</span>
                    <a>Todos os produtos</a>
                    <div class="clearBoth"></div>
                </div>
                <ul class="scrollable-content flex" scroll flex md-scroll-x>
                    <li ng-repeat="ITEM in PROD.ITENS" ng-click="$root.toolbar=false; $root.PROD_DETALHES = ITEM;">
                        <h4>{{ITEM.NOME}}</h4>
                    </li>
                    <div class="clearBoth"></div>
                </ul>
            </li>
        </ul>
    </md-content>

    <div class="boxPopup" box="carrinho" ng-if="$root.CARRINHO">
        <div class="topTitulo">
            <a class="open-left" ng-click="voltarTop('carrinho')">
                <i class="mdi mdi-navigation-chevron-left"></i>
            </a>
            <div class="textoTitulo">Carrinho</div>
        </div>
        <div class="scrollable-content" scroll flex md-scroll-y>
            <ul>
                <li ng-repeat="PROD in $root.CARRINHO_COMPRAS.PRODUTOS">
                    <div class="b" ng-click="$root.PROD_DETALHES = PROD;">
                        <h4>{{PROD.NOME}} <i ng-if="PROD.CONTEUDO != NULL">({{PROD.CONTEUDO}})</i></h4>
                        <label class="total_de" ng-if="PROD.DE_PRECO_FORMAT"><span class="v">{{PROD.DE_PRECO_FORMAT}}</span></label>
                        <label><span class="v">{{PROD.PRECO_FORMAT}}</span></label>
                    </div>
                    <div class="addRemoveQtdeProduto" unidade_medida="{{PROD.UNIDADE_MEDIDA}}">
                        <i ng-click="addRemoveQtdeProd(PROD, '+')" class="mdi mdi-content-add-circle"></i>
                        <span>{{PROD.QTDE}}</span>
                        <i ng-click="addRemoveQtdeProd(PROD, '-')" class="mdi mdi-content-remove-circle"></i>
                    </div>
                </li>
                <li style="height: auto;text-align: center" ng-if="!$root.CARRINHO_COMPRAS.PRODUTOS">
                    Nenhum produto adicionado na sua lista de compra!
                </li>
                <li style="height: auto;">
                    <a ng-if="$root.CARRINHO_COMPRAS.TOTAL_POR_VALOR" id="limparCarrinho" ng-click="limparCarrinho()">Limpar carrinho<i class="mdi mdi-content-remove-circle"></i></a>
                    <a id="addMaisItens" ng-click="location('#!/')">Adicionar{{$root.CARRINHO_COMPRAS.PRODUTOS?' mais itens':''}}<i class="mdi mdi-content-add-circle"></i></a>
                </li>
            </ul>
        </div>
        <div id="subTotalCarrinho">
            Subtotal estimado: <b>R$ {{$root.CARRINHO_COMPRAS.TOTAL_POR}}</b>
            <br><a ng-if="$root.CARRINHO_COMPRAS.TOTAL_POR_VALOR" id="fechar_compra" ng-click="location('#!/token/fecharcompra')"><i class="mdi mdi-editor-attach-money"></i> Finalizar compra</a>
        </div>
    </div>

    <div class="boxPopup" box="produto" ng-if="$root.PROD_DETALHES">
        <div class="topTitulo">
            <a class="open-left" ng-click="$root.toolbar=true; $root.PROD_DETALHES = false;">
                <i class="mdi mdi-navigation-chevron-left"></i>
            </a>
            <div class="textoTitulo">{{$root.PROD_DETALHES.NOME}}</div>
        </div>
        <div class="scrollable-content" scroll flex md-scroll-y>
            fds
            <div ng-if="$root.PROD_DETALHES.UNIDADE_MEDIDA!='KG'" class="addRemoveQtdeProduto" unidade_medida="{{$root.PROD_DETALHES.UNIDADE_MEDIDA}}">
                <i ng-click="addRemoveQtdeProd($root.PROD_DETALHES, '+')" class="mdi mdi-content-add-circle"></i>
                <span>{{$root.PROD_DETALHES.QTDE}}</span>
                <i ng-click="addRemoveQtdeProd($root.PROD_DETALHES, '-')" class="mdi mdi-content-remove-circle"></i>
            </div>
        </div>
    </div>

    <a ng-if="$root.CARRINHO_COMPRAS.TOTAL_POR_VALOR && $root.TIPO_PG != 'PAGAMENTO'" id="boxCarrinhoFloat" ng-click="location('#!/index/CARRINHO')">
        <i class="mdi mdi-action-shopping-cart"></i> R$ {{$root.CARRINHO_COMPRAS.TOTAL_POR}}
    </a>
</div>

<md-content id="boxPagamento" ng-if="$root.TIPO_PG == 'PAGAMENTO'" t="{{$root.BTN_TYPE}}" step="{{STEP}}" class="scrollable-content" mn-touch swipe-left="clickBtnHome(1)" scroll flex md-scroll-y>
    <h4 ng-if="!$root.STEPS.length">
        Aguarde por favor, carregando...
    </h4>
    <i ng-if="STEP == 1 && $root.usuario.COMPRAR" ng-click="$root.TIPO_PG='COMPRAR'" class="mdi mdi-action-shopping-cart"></i>
    <ul ng-if="$root.STEPS">
        <li ng-click="ITEM.STEP==1?clickBtnHome():null" step="{{ITEM.STEP}}" ng-repeat="ITEM in $root.STEPS" class="{{STEP>=ITEM.STEP?'active':''}}">
            <p>
                <span ng-if="ITEM.STEP != 'X' && ITEM.STEP != 'AA'">
                    <i ng-if="STEP==4" class="mdi mdi-navigation-check"></i>
                    {{STEP==4?'':ITEM.STEP_TEXTO}}
                </span>
                {{ITEM.TEXTO}}
                <a id="ver-carrinho" ng-if="$root.PRODUTOS.length" ng-click="verCarrinho()">{{$root.transacaoIdCarrinho?'Voltar para o Carrinho':'Carrinho'}}</a>
            </p>
            <div class="clearBoth"></div>
            <h4 ng-if="ITEM.SUB_TEXTO">{{ITEM.SUB_TEXTO}}</h4>
            <div ng-if="STEP==ITEM.STEP&&STEP==3" id="Payment">
                <h4 ng-if="$root.STATUS_TEXTO">{{$root.STATUS_TEXTO}}</h4>

                <div ng-if="!$root.transacaoIdCarrinho" id="Produtos" class="scrollable-content" scroll flex md-scroll-y>
                    <h5>Carrinho</h5>

                    <i class="mdi-navigation-close" onclick="$('#Produtos').hide();"></i>

                    <ul ng-if="$root.PRODUTOS && !$root.transacaoIdCarrinho">
                        <li ng-repeat="PROD in $root.PRODUTOS">
                            <div class="info">
                                <h4>{{PROD.NOME}} <i ng-if="PROD.CONTEUDO != NULL">({{PROD.CONTEUDO}})</i></h4>
                                <span ng-if="PROD.QTDE != NULL">Quantidade <b>{{PROD.QTDE}}</b></span>
                                <label class="total_de" ng-if="PROD.DE_PRECO_FORMAT"><span class="v">{{PROD.DE_PRECO_FORMAT}}</span></label>
                                <label><span class="v">{{PROD.PRECO_FORMAT}}</span></label>
                                <p ng-if="PROD.DESCRICAO != NULL">{{PROD.DESCRICAO}}</p>
                            </div>
                            <div class="clearBoth"></div>
                        </li>
                    </ul>
                </div>

                <div id="boxPg" ng-include src="'view/payment/formas_pg.html'"></div>
            </div>
        </li>
    </ul>
</md-content>

<button step="{{STEP}}" class="btnConfirme" id="btn-home" ng-click="clickBtnHome()" ng-if="$root.STEPS.length && BTN_HOME" ng-bind-html="TEXTO_BTN"></button>