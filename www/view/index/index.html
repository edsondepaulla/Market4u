<md-content id="boxCompras" ng-if="$root.TIPO_PG == 'COMPRAR' && $root.usuario.COMPRAR" class="scrollable-content" scroll flex md-scroll-y>
    <h2>Compras</h2>

    <br>
    <a ng-if="$root.usuario.AUTOATENDIMENTO" ng-click="$root.TIPO_PG = 'PAGAMENTO'">Autoatendimento</a>

    <div class="boxPopup" box="carrinho" ng-if="$root.CARRINHO">
        <div class="topTitulo">
            <a class="open-left" ng-click="$root.CARRINHO=false;$root.toolbar = true;">
                <i class="mdi mdi-navigation-chevron-left"></i>
            </a>
            <div class="textoTitulo">Carrinho</div>
            <a id="fechar_compra">FECHAR COMPRA</a>
        </div>
        <div class="scrollable-content" scroll flex md-scroll-y>
            <ul ng-if="$root.CARRINHO_COMPRAS.PRODUTOS">
                <li ng-repeat="PROD in $root.CARRINHO_COMPRAS.PRODUTOS">
                    <div class="b" ng-click="$root.PROD_DETALHES = PROD;">
                        <h4>{{PROD.NOME}} <i ng-if="PROD.CONTEUDO != NULL">({{PROD.CONTEUDO}})</i></h4>
                        <label class="total_de" ng-if="PROD.DE_PRECO_FORMAT"><span class="v">{{PROD.DE_PRECO_FORMAT}}</span></label>
                        <label><span class="v">{{PROD.PRECO_FORMAT}}</span></label>
                    </div>
                    <div class="addRemoveQtdeProduto" unidade_medida="{{PROD.UNIDADE_MEDIDA}}">
                        <i ng-click="addRemoveQtdeProd(PROD, '+')" class="mdi mdi-content-add-circle"></i>
                        <span>{{PROD.QTDE}}</span>
                        <i ng-click="addRemoveQtdeProd(PROD, '-')" class="mdi mdi-content-remove-circle"></i>
                    </div>
                </li>
                <li style="height: auto;">
                    <a id="addMaisItens" ng-click="$root.CARRINHO=false;$root.toolbar = true;">ADICIONAR MAIS ITENS</a>
                </li>
            </ul>
        </div>
        <div id="subTotalCarrinho">
            Subtotal estimado: <b>R$ {{$root.CARRINHO_COMPRAS.TOTAL_POR}}</b>
        </div>
    </div>

    <div class="boxPopup" box="produto" ng-if="$root.PROD_DETALHES">
        <div class="topTitulo">
            <a class="open-left" ng-click="$root.PROD_DETALHES = false;">
                <i class="mdi mdi-navigation-chevron-left"></i>
            </a>
            <div class="textoTitulo">{{$root.PROD_DETALHES.NOME}}</div>
        </div>
        xxx

        <div class="addRemoveQtdeProduto" unidade_medida="{{$root.PROD_DETALHES.UNIDADE_MEDIDA}}">
            <i ng-click="addRemoveQtdeProd($root.PROD_DETALHES, '+')" class="mdi mdi-content-add-circle"></i>
            <span>{{$root.PROD_DETALHES.QTDE}}</span>
            <i ng-click="addRemoveQtdeProd($root.PROD_DETALHES, '-')" class="mdi mdi-content-remove-circle"></i>
        </div>
    </div>

    <a ng-if="$root.CARRINHO_COMPRAS.TOTAL_POR_VALOR && $root.TIPO_PG != 'PAGAMENTO'" id="boxCarrinhoFloat" ng-click="location('#!/index/CARRINHO')">
        <i class="mdi mdi-action-shopping-cart"></i> R$ {{$root.CARRINHO_COMPRAS.TOTAL_POR}}
    </a>
</md-content>

<md-content id="boxPagamento" ng-if="$root.TIPO_PG == 'PAGAMENTO'" t="{{$root.BTN_TYPE}}" step="{{STEP}}" class="scrollable-content" mn-touch swipe-left="clickBtnHome(1)" scroll flex md-scroll-y>
    <h4 ng-if="!$root.STEPS.length">
        Aguarde por favor, carregando...
    </h4>
    <ul ng-if="$root.STEPS">
        <li ng-click="ITEM.STEP==1?clickBtnHome():null" step="{{ITEM.STEP}}" ng-repeat="ITEM in $root.STEPS" class="{{STEP>=ITEM.STEP?'active':''}}">
            <p>
                <span ng-if="ITEM.STEP != 'X' && ITEM.STEP != 'AA'">
                    <i ng-if="STEP==4" class="mdi mdi-navigation-check"></i>
                    {{STEP==4?'':ITEM.STEP_TEXTO}}
                </span>
                {{ITEM.TEXTO}}
                <i ng-if="ITEM.STEP == 'AA' && $root.usuario.COMPRAR && $root.usuario.AUTOATENDIMENTO" ng-click="$root.TIPO_PG='COMPRAR'" class="mdi mdi-navigation-close"></i>
            </p>
            <div class="clearBoth"></div>
            <h4 ng-if="ITEM.SUB_TEXTO">{{ITEM.SUB_TEXTO}}</h4>
            <div ng-if="STEP==ITEM.STEP&&STEP==3" id="Payment">
                <h4 ng-if="$root.STATUS_TEXTO">{{$root.STATUS_TEXTO}}</h4>

                <a id="ver-carrinho" ng-if="$root.PRODUTOS.length" onclick="$('#Produtos').show();">Ver carrinho</a>

                <div id="Produtos" class="scrollable-content" scroll flex md-scroll-y>
                    <h5>Carrinho</h5>

                    <i class="mdi-navigation-close" onclick="$('#Produtos').hide();"></i>

                    <ul ng-if="$root.PRODUTOS">
                        <li ng-repeat="PROD in $root.PRODUTOS">
                            <div class="info">
                                <h4>{{PROD.NOME}} <i ng-if="PROD.CONTEUDO != NULL">({{PROD.CONTEUDO}})</i></h4>
                                <span>{{PROD.CAT_DESCRICAO}} - {{PROD.FAB_DESCRICAO}}</span>
                                <span ng-if="PROD.QTDE != NULL">Quantidade <b>{{PROD.QTDE}}</b></span>
                                <label class="total_de" ng-if="PROD.DE_PRECO_FORMAT"><span>de</span> <span class="v">{{PROD.DE_PRECO_FORMAT}}</span></label>
                                <label><span ng-if="PROD.DE_PRECO_FORMAT">por</span> <span class="v">{{PROD.PRECO_FORMAT}}</span></label>
                                <p ng-if="PROD.DESCRICAO != NULL">{{PROD.DESCRICAO}}</p>
                            </div>
                            <div class="img"><img src="{{PROD.IMAGEM}}"></div>
                            <div class="clearBoth"></div>
                        </li>
                    </ul>
                </div>

                <div id="boxPg" ng-include src="'view/payment/formas_pg.html'"></div>
            </div>
        </li>
    </ul>
</md-content>

<button step="{{STEP}}" class="btnConfirme" id="btn-home" ng-click="clickBtnHome()" ng-if="$root.STEPS.length && BTN_HOME" ng-bind-html="TEXTO_BTN"></button>