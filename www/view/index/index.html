<div id="boxCompras" ng-if="$root.TIPO_PG == 'COMPRAR' && $root.usuario.COMPRAR">
    <i ng-if="$root.PRODUTOS_COMPRAS.CATEGORIAS" ng-click="$root.clickItem('busca')" id="buscaProdutos" class="mdi mdi-action-search"></i>
    <ul id="boxCategorias">
        <li class="{{CAT.ACTIVE?'active':''}}" ng-repeat="CAT in $root.PRODUTOS_COMPRAS.CATEGORIAS">
            <a ng-click="getCompras(CAT)">{{CAT.DESCRICAO}}</a>
        </li>
        <div class="clearBoth"></div>
    </ul>
    <div class="clearBoth"></div>

    <div class="boxPopup" box="locais" ng-if="$root.LOCAL.ATIVO">
        <div class="topTitulo">
            <a class="open-left" ng-click="$root.clickItem('index')">
                <i class="mdi mdi-navigation-chevron-left"></i>
            </a>
            <div class="textoTitulo">Locais</div>
        </div>
        <ul>
            <li ng-click="setLocal(ITEM)" ng-repeat="ITEM in $root.LOCAL.ITENS">
                {{ITEM.NOME}}
            </li>
        </ul>
    </div>

    <div class="boxPopup" box="busca" ng-if="$root.PRODUTOS_BUSCA.ATIVO">
        <div class="topTitulo">
            <a class="open-left" ng-click="$root.clickItem('index')">
                <i class="mdi mdi-navigation-chevron-left"></i>
            </a>
            <div id="busca">
                <i class="mdi mdi-action-search"></i>
                <input ng-keyup="getLst(true)" ng-model="$root.pesquisa" placeholder="Digite o que você procura">
                <i ng-if="$root.pesquisa && $root.pesquisa != ''" ng-click="clearPesquisa()" class="mdi mdi-content-clear"></i>
            </div>
        </div>
    </div>

    <md-content id="boxProdutos" class="scrollable-content flex" type="produtos" scroll="{{$root.PRODUTOS_COMPRAS.SCROLL.ATIVO}}" flex md-scroll-y>
        <ul>
            <li count="{{$root.PRODUTOS_COMPRAS.SUBCATEGORIAS.length}}" ng-repeat="SUBCAT in $root.PRODUTOS_COMPRAS.SUBCATEGORIAS">
                <div ng-if="$root.PRODUTOS_COMPRAS.SUBCATEGORIAS.length > 1" class="t">
                    <span>{{SUBCAT.DESCRICAO}}</span>
                    <a>Todos os produtos</a>
                    <div class="clearBoth"></div>
                </div>
                <ul class="scrollable-content flex" scroll md-scroll-x>
                    <li clear_both="{{ITEM.CLEAR_BOTH?1:0}}" ng-repeat="ITEM in SUBCAT.ITENS">
                        <div ng-if="ITEM.TYPE=='PROD'" ng-click="$root.toolbar=false; $root.MenuBottom=false; $root.PROD_DETALHES = ITEM;">
                            <img data-src="{{ITEM.IMAGEM}}" src="img/market4u.png" alt="">
                            <p class="preco">
                                <label class="de" ng-if="ITEM.VALOR_DE">{{ITEM.VALOR_DE_FORMAT}}</label>
                                <label>{{ITEM.VALOR_FORMAT}}</label>
                            </p>
                            <h4>{{ITEM.NOME}}</h4>
                        </div>
                        <div ng-if="ITEM.TYPE=='PROD'" unidade_medida="{{ITEM.UNIDADE_MEDIDA}}" class="addRemoveProd" qtde="{{$root.QTDE_PRODUTOS[ITEM.PROD_ID]?$root.QTDE_PRODUTOS[ITEM.PROD_ID]:0}}">
                            <i ng-click="addRemoveQtdeProd(ITEM, '-')" class="mdi mdi-content-remove"></i>
                            <span>{{$root.QTDE_PRODUTOS[ITEM.PROD_ID]?$root.QTDE_PRODUTOS[ITEM.PROD_ID]:0}}</span>
                            <i ng-click="addRemoveQtdeProd(ITEM, '+')" class="mdi mdi-content-add"></i>
                        </div>
                        <div ng-if="ITEM.TYPE=='NAO_ENCONTROU'">
                            Não encontrou o que queria?
                            Descreva o produto
                        </div>
                        <div ng-if="ITEM.TYPE=='VEJA_tODOS'">
                            Veja todos os produtos
                            <i class="mdi mdi-navigation-arrow-forward"></i>
                        </div>
                    </li>
                </ul>
            </li>
        </ul>
    </md-content>

    <div class="boxPopup" box="carrinho" ng-if="$root.CARRINHO">
        <div class="topTitulo">
            <a class="open-left" ng-click="$root.clickItem('carrinho')">
                <i class="mdi mdi-navigation-chevron-left"></i>
            </a>
            <div class="textoTitulo">Carrinho</div>
        </div>
        <div class="scrollable-content" scroll md-scroll-y>
            <ul>
                <li ng-repeat="PROD in $root.CARRINHO_COMPRAS.PRODUTOS">
                    <div class="b" ng-click="$root.MenuBottom=false; $root.PROD_DETALHES = PROD;">
                        <img data-src="{{PROD.IMAGEM}}" src="img/market4u.png" alt="">
                        <h4>{{PROD.NOME}} <i ng-if="PROD.CONTEUDO != NULL">({{PROD.CONTEUDO}})</i></h4>
                        <label class="total_de" ng-if="PROD.DE_PRECO_FORMAT"><span class="v">{{PROD.DE_PRECO_FORMAT}}</span></label>
                        <label><span class="v">{{PROD.PRECO_FORMAT}}</span></label>
                    </div>
                    <div class="addRemoveQtdeProduto" unidade_medida="{{PROD.UNIDADE_MEDIDA}}">
                        <i ng-click="addRemoveQtdeProd(PROD, '+')" class="mdi mdi-content-add-circle"></i>
                        <span>{{$root.QTDE_PRODUTOS[PROD.PROD_ID]?$root.QTDE_PRODUTOS[PROD.PROD_ID]:0}}</span>
                        <i ng-click="addRemoveQtdeProd(PROD, '-')" class="mdi mdi-content-remove-circle"></i>
                    </div>
                </li>
                <li style="height: auto;text-align: center" ng-if="!$root.CARRINHO_COMPRAS.PRODUTOS">
                    Nenhum produto adicionado na sua lista de compra!
                </li>
                <li style="height: auto;">
                    <a id="addMaisItens" ng-click="$root.clickItem('carrinho')">Adicionar{{$root.CARRINHO_COMPRAS.PRODUTOS?' mais itens':''}}<i class="mdi mdi-content-add-circle"></i></a>
                    <a ng-if="$root.CARRINHO_COMPRAS.TOTAL_POR_VALOR" id="limparCarrinho" ng-click="limparCarrinho()">Limpar carrinho<i class="mdi mdi-content-remove-circle"></i></a>
                </li>
            </ul>
        </div>
        <div ng-if="$root.CARRINHO_COMPRAS.TOTAL_POR_VALOR" id="subTotalCarrinho">
            Subtotal estimado: <b>R$ {{$root.CARRINHO_COMPRAS.TOTAL_POR}}</b>
            <br><a id="fechar_compra" ng-click="location('#!/token/fecharcompra')"><i class="mdi mdi-editor-attach-money"></i> Finalizar compra</a>
        </div>
    </div>

    <div class="boxPopup" box="produto" ng-if="$root.PROD_DETALHES">
        <div class="topTitulo">
            <a class="open-left" ng-click="$root.MenuBottom=true; $root.toolbar=$root.PROD_DETALHES.ORIGEM=='COMPRAS'?true:false; $root.PROD_DETALHES = false;">
                <i class="mdi mdi-navigation-chevron-left"></i>
            </a>
            <div class="textoTitulo">{{$root.PROD_DETALHES.NOME}}</div>
        </div>
        <div class="scrollable-content" scroll md-scroll-y>
            <img data-src="{{$root.PROD_DETALHES.IMAGEM}}" src="img/market4u.png" alt="">
            <BR>{{$root.PROD_DETALHES.VALOR_FORMAT}}
            <div ng-if="$root.PROD_DETALHES.UNIDADE_MEDIDA!='KG'||$root.QTDE_PRODUTOS[$root.PROD_DETALHES.PROD_ID]" class="addRemoveQtdeProduto" unidade_medida="{{$root.PROD_DETALHES.UNIDADE_MEDIDA}}">
                <i ng-click="addRemoveQtdeProd($root.PROD_DETALHES, '+')" class="mdi mdi-content-add-circle"></i>
                <span>{{$root.QTDE_PRODUTOS[$root.PROD_DETALHES.PROD_ID]?$root.QTDE_PRODUTOS[$root.PROD_DETALHES.PROD_ID]:0}}</span>
                <i ng-click="addRemoveQtdeProd($root.PROD_DETALHES, '-')" class="mdi mdi-content-remove-circle"></i>
            </div>
        </div>
    </div>

    <a bottom="{{$root.PROD_DETALHES?1:0}}" ng-if="$root.CARRINHO_COMPRAS.TOTAL_POR_VALOR && $root.TIPO_PG != 'PAGAMENTO'" id="boxCarrinhoFloat" style="z-index: {{$root.PROD_DETALHES?2:1}}" ng-click="$root.MenuBottom=true;$root.toolbar=false;$root.CARRINHO=true;$root.PROD_DETALHES=false;">
        <i class="mdi mdi-action-shopping-cart"></i> R$ {{$root.CARRINHO_COMPRAS.TOTAL_POR}}
    </a>
</div>

<md-content id="boxPagamento" ng-if="$root.TIPO_PG == 'PAGAMENTO'" t="{{$root.BTN_TYPE}}" step="{{STEP}}" class="scrollable-content" mn-touch swipe-left="clickBtnHome(1)" scroll md-scroll-y>
    <ul ng-if="$root.STEPS">
        <li ng-click="ITEM.STEP==1?clickBtnHome():null" step="{{ITEM.STEP}}" ng-repeat="ITEM in $root.STEPS" class="{{STEP>=ITEM.STEP?'active':''}}">
            <p>
                <span ng-if="ITEM.STEP != 'X' && ITEM.STEP != 'AA'">
                    <i ng-if="STEP==4" class="mdi mdi-navigation-check"></i>
                    {{STEP==4?'':ITEM.STEP_TEXTO}}
                </span>
                {{ITEM.TEXTO}}
                <a id="ver-carrinho" ng-if="$root.PRODUTOS.length" ng-click="verCarrinho()">{{$root.transacaoIdCarrinho?'Voltar para o Carrinho':'Carrinho'}}</a>
            </p>
            <div class="clearBoth"></div>
            <h4 ng-if="ITEM.SUB_TEXTO">{{ITEM.SUB_TEXTO}}</h4>
            <div ng-if="STEP==ITEM.STEP&&STEP==3" id="Payment">
                <h4 ng-if="$root.STATUS_TEXTO">{{$root.STATUS_TEXTO}}</h4>

                <div ng-if="!$root.transacaoIdCarrinho" id="Produtos" class="scrollable-content" scroll md-scroll-y>
                    <h5>Carrinho</h5>

                    <i class="mdi-navigation-close" onclick="$('#Produtos').hide();"></i>

                    <ul ng-if="$root.PRODUTOS && !$root.transacaoIdCarrinho">
                        <li ng-repeat="PROD in $root.PRODUTOS">
                            <div class="info">
                                <h4>{{PROD.NOME}} <i ng-if="PROD.CONTEUDO != NULL">({{PROD.CONTEUDO}})</i></h4>
                                <span ng-if="PROD.QTDE != NULL">Quantidade <b>{{PROD.QTDE}}</b></span>
                                <label class="total_de" ng-if="PROD.DE_PRECO_FORMAT"><span class="v">{{PROD.DE_PRECO_FORMAT}}</span></label>
                                <label><span class="v">{{PROD.PRECO_FORMAT}}</span></label>
                                <p ng-if="PROD.DESCRICAO != NULL">{{PROD.DESCRICAO}}</p>
                            </div>
                            <div class="clearBoth"></div>
                        </li>
                    </ul>
                </div>

                <div id="boxPg" ng-include src="'view/payment/formas_pg.html'"></div>

                <a ng-click="location('#!/')" ng-if="!$root.transacaoIdCarrinho">Cancelar</a>
            </div>
        </li>
    </ul>
</md-content>

<button step="{{STEP}}" class="btnConfirme" id="btn-home" ng-click="clickBtnHome()" ng-if="$root.STEPS.length && BTN_HOME" ng-bind-html="TEXTO_BTN"></button>